Tags: Python, Flask, Frameworks, Jinja2, HTML

# 2023-09-27

## Intro to Flask 3

Looks like today we're going to make a lil blog with Flask and Jinja.

Jinja is a templating engine for Python. You can define placeholders that get replaced with data at runtime server-side. Here are some of the basic syntax and ways of using it.

| Placeholder          | Description                                         |
| -------------------- | --------------------------------------------------- |
| `{{ variable }}`     | Renders a variable                                  |
| `{% for x in y %}`   | Starts a for-loop                                   |
| `{% endfor %}`       | Ends a for-loop                                     |
| `{% if condition %}` | Starts an if-statement                              |
| `{% endif %}`        | Ends an if-statement                                |
| `{% else %}`         | Else branch in an if-statement or for-loop          |
| `{% elif %}`         | Else-If branch in an if-statement                   |
| `{{ x\|filter }}`    | Applies a filter to a variable (e.g., `capitalize`) |

##### `for` loop

```jinja
{% for item in items %}
    <p>{{ item }}</p>
{% endfor %}
```

##### `if else`

```jinja
{% if user_is_admin %}
    <p>Welcome, admin!</p>
{% else %}
    <p>Welcome, guest!</p>
{% endif %}
```

##### `filter`

```jinja
<!-- Output name in title case -->
{{ name|title }}
```

##### `comments`

```jinja
{# This is a comment and won't be rendered in the HTML output. #}
```

##### whitespace control

```jinja
<!-- Strips whitespace before and after the element -->
{%- if user_is_admin -%}
    <p>Welcome, admin!</p>
{%- endif -%}
```

##### inheritance

Inheritance is a really powerful feature that allows you to define a base template that you can then easily fill in with child templates. I assume this is what we're going to be using today to help with the blog project - creating some kind of base template for each blog post and using the `child.html` to write each post.

###### base.html

```jinja
<html>
<head>
    <title>{% block title %}Default Title{% endblock %}</title>
</head>
<body>
    {% block content %}{% endblock %}
</body>
</html>
```

###### child.html

```jinja
{% extends 'base.html' %}

{% block title %}My Page{% endblock %}
{% block content %}
    <p>This is my page.</p>
{% endblock %}
```

###### output.html

```html
<html>
    <head>
        <title>My Page</title>
    </head>
    <body>
        <p>This is my page.</p>
    </body>
</html>
```

##### Sending parameters to HTML file

You can pass parameters from your Python file to the HTML file as keyword arguments in the `render_template` method.

###### app.py

```python
def home():
    random_int = random.randint(1, 10)
    return render_template("index.html", num=random_int)
```

###### home.html

```jinja
<p>Random number is: {{ num }}</p>
```

### Dynamic Footer Copyright

A lot of websites hardcode their copyright year into their footer. Why not use code to do that automatically? Here's how to do that.

In the `app.py` file we need to import the `datetime` module and get the current year from it. We then need to pass that as a variable to our `index.html` file through the `render_template` method.

##### app.py

```python
from datetime import datetime
from flask import Flask, render_template

app = Flask(__name__)

current_year = datetime.now().year


@app.route("/")
def home():
    return render_template("index.html", year=current_year)


if __name__ == "__main__":
    app.run(debug=True)
```

Inside the `index.html` file all we need to do then is create a `<footer>` with `{{ year }}` as a variable.

##### index.html

```jinja
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
        />
        <title>Test</title>
    </head>
    <body>
        <h1>Hello work</h1>
    </body>
    <footer>
        <p>Copyright {{ year }} Mark Boyd</p>
    </footer>
</html>

```

### Flask Age-Gender-Nationality Guesser

I completed the challenge to make a age and gender guesser using an API and added on the nationality as a bonus. The repo is [here](https://github.com/markalanboyd/flask-age-gender-nationality-guesser).
